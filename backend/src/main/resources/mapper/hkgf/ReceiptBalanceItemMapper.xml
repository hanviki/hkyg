<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cc.mrbird.febs.hkgf.dao.ReceiptBalanceItemMapper">
    <resultMap id="BaseResultMap" type="cc.mrbird.febs.hkgf.entity.ReceiptBalanceItem">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 04 10:11:19 CST 2018.
        -->
        <id column="id" property="id" jdbcType="VARCHAR"/>
        <result column="receipt_no" property="receiptNo" jdbcType="VARCHAR"/>
        <result column="charge_date" property="chargeDate" jdbcType="TIMESTAMP"/>
        <result column="receipt_item_type" property="receiptItemType" jdbcType="VARCHAR"/>
        <result column="receipt_item_name" property="receiptItemName" jdbcType="VARCHAR"/>
        <result column="receipt_item_spec" property="receiptItemSpec" jdbcType="VARCHAR"/>
        <result column="receipt_item_unit" property="receiptItemUnit" jdbcType="VARCHAR"/>
        <result column="receipt_item_num" property="receiptItemNum" jdbcType="INTEGER"/>
        <result column="unit_fee" property="unitFee" jdbcType="INTEGER"/>
        <result column="fee" property="fee" jdbcType="INTEGER"/>
        <result column="zzd_no" property="zzdNo" jdbcType="VARCHAR"/>
        <result column="detail_no" property="detailNo" jdbcType="VARCHAR"/>
        <result column="major_catalogues" property="majorCatalogues" jdbcType="INTEGER"/>
        <result column="own_fee" property="ownFee" jdbcType="INTEGER"/>
        <result column="expense_fee" property="expenseFee" jdbcType="INTEGER"/>
        <result column="expense_rate" property="expenseRate" jdbcType="INTEGER"/>
        <result column="expense_flag" property="expenseFlag" jdbcType="INTEGER"/>
        <result column="template_no" property="templateNo" jdbcType="VARCHAR"/>
        <result column="receipt_item_code" property="receiptItemCode" jdbcType="VARCHAR"/>
        <result column="stage_code" property="stageCode" jdbcType="VARCHAR"/>
        <result column="into_hospital_id" property="intoHospitalId" jdbcType="VARCHAR"/>
        <result column="out_hospital_id" property="outHospitalId" jdbcType="VARCHAR"/>
        <result column="into_time" property="intoTime" jdbcType="TIMESTAMP"/>
    </resultMap>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 04 10:11:19 CST 2018.
        -->
        delete from receipt_balance_item
        where id = #{id,jdbcType=VARCHAR}
    </delete>
    <insert id="insert" parameterType="cc.mrbird.febs.hkgf.entity.ReceiptBalanceItem">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 04 10:11:19 CST 2018.
        -->
        <selectKey resultType="java.lang.String" keyProperty="id" order="BEFORE">
            SELECT LAST_INSERT_ID()
        </selectKey>
        insert into receipt_balance_item (id, receipt_no, charge_date,
        receipt_item_type, receipt_item_name, receipt_item_spec,
        receipt_item_unit, receipt_item_num, unit_fee,
        fee, zzd_no, detail_no,
        major_catalogues, own_fee, expense_fee,
        expense_rate, expense_flag, template_no,
        receipt_item_code, stage_code, into_hospital_id,
        out_hospital_id, into_time)
        values (#{id,jdbcType=VARCHAR}, #{receiptNo,jdbcType=VARCHAR}, #{chargeDate,jdbcType=TIMESTAMP},
        #{receiptItemType,jdbcType=VARCHAR}, #{receiptItemName,jdbcType=VARCHAR}, #{receiptItemSpec,jdbcType=VARCHAR},
        #{receiptItemUnit,jdbcType=VARCHAR}, #{receiptItemNum,jdbcType=INTEGER}, #{unitFee,jdbcType=INTEGER},
        #{fee,jdbcType=INTEGER}, #{zzdNo,jdbcType=VARCHAR}, #{detailNo,jdbcType=VARCHAR},
        #{majorCatalogues,jdbcType=INTEGER}, #{ownFee,jdbcType=INTEGER}, #{expenseFee,jdbcType=INTEGER},
        #{expenseRate,jdbcType=INTEGER}, #{expenseFlag,jdbcType=INTEGER}, #{templateNo,jdbcType=VARCHAR},
        #{receiptItemCode,jdbcType=VARCHAR}, #{stageCode,jdbcType=VARCHAR}, #{intoHospitalId,jdbcType=VARCHAR},
        #{outHospitalId,jdbcType=VARCHAR}, #{intoTime,jdbcType=TIMESTAMP})
    </insert>
    <update id="updateByPrimaryKey" parameterType="cc.mrbird.febs.hkgf.entity.ReceiptBalanceItem">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 04 10:11:19 CST 2018.
        -->
        update receipt_balance_item
        set receipt_no = #{receiptNo,jdbcType=VARCHAR},
        charge_date = #{chargeDate,jdbcType=TIMESTAMP},
        receipt_item_type = #{receiptItemType,jdbcType=VARCHAR},
        receipt_item_name = #{receiptItemName,jdbcType=VARCHAR},
        receipt_item_spec = #{receiptItemSpec,jdbcType=VARCHAR},
        receipt_item_unit = #{receiptItemUnit,jdbcType=VARCHAR},
        receipt_item_num = #{receiptItemNum,jdbcType=INTEGER},
        unit_fee = #{unitFee,jdbcType=INTEGER},
        fee = #{fee,jdbcType=INTEGER},
        zzd_no = #{zzdNo,jdbcType=VARCHAR},
        detail_no = #{detailNo,jdbcType=VARCHAR},
        major_catalogues = #{majorCatalogues,jdbcType=INTEGER},
        own_fee = #{ownFee,jdbcType=INTEGER},
        expense_fee = #{expenseFee,jdbcType=INTEGER},
        expense_rate = #{expenseRate,jdbcType=INTEGER},
        expense_flag = #{expenseFlag,jdbcType=INTEGER},
        template_no = #{templateNo,jdbcType=VARCHAR},
        receipt_item_code = #{receiptItemCode,jdbcType=VARCHAR},
        stage_code = #{stageCode,jdbcType=VARCHAR},
        into_hospital_id = #{intoHospitalId,jdbcType=VARCHAR},
        out_hospital_id = #{outHospitalId,jdbcType=VARCHAR},
        into_time = #{intoTime,jdbcType=TIMESTAMP}
        where id = #{id,jdbcType=VARCHAR}
    </update>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 04 10:11:19 CST 2018.
        -->
        select id, receipt_no, charge_date, receipt_item_type, receipt_item_name, receipt_item_spec,
        receipt_item_unit, receipt_item_num, unit_fee, fee, zzd_no, detail_no, major_catalogues,
        own_fee, expense_fee, expense_rate, expense_flag, template_no, receipt_item_code,
        stage_code, into_hospital_id, out_hospital_id, into_time
        from receipt_balance_item
        where id = #{id,jdbcType=VARCHAR}
    </select>
    <select id="selectAll" resultMap="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 04 10:11:19 CST 2018.
        -->
        select id, receipt_no, charge_date, receipt_item_type, receipt_item_name, receipt_item_spec,
        receipt_item_unit, receipt_item_num, unit_fee, fee, zzd_no, detail_no, major_catalogues,
        own_fee, expense_fee, expense_rate, expense_flag, template_no, receipt_item_code,
        stage_code, into_hospital_id, out_hospital_id, into_time
        from receipt_balance_item
    </select>
    <select id="queryDailyCharge"
            parameterType="cc.mrbird.febs.hkgf.entity.request.DailyQueryRequest">
        SELECT
        sum(s.own_fee) AS ZFJE,
        sum(s.expense_fee) AS GFJE,
        sum(s.fee) AS ZJE
        FROM
        receipt_balance_item AS s
        WHERE
        s.receipt_no = #{ZZDH}
        AND s.into_time BETWEEN #{JSQSRQ}
        AND #{JSZZRQ}
    </select>
    <delete id="deleteByFphm" parameterType="java.lang.String">
        delete from receipt_balance_item
        where receipt_no = #{fphm,jdbcType=VARCHAR}
    </delete>
</mapper>