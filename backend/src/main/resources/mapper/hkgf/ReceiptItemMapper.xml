<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cc.mrbird.febs.hkgf.dao.ReceiptItemMapper">
    <resultMap id="BaseResultMap" type="cc.mrbird.febs.hkgf.entity.ReceiptItem">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 04 10:11:19 CST 2018.
        -->
        <id column="id" property="id" jdbcType="VARCHAR"/>
        <result column="receipt_no" property="receiptNo" jdbcType="VARCHAR"/>
        <result column="detail_no" property="detailNo" jdbcType="VARCHAR"/>
        <result column="project_code" property="projectCode" jdbcType="VARCHAR"/>
        <result column="charge_date" property="chargeDate" jdbcType="TIMESTAMP"/>
        <result column="receipt_item_type" property="receiptItemType" jdbcType="VARCHAR"/>
        <result column="receipt_item_name" property="receiptItemName" jdbcType="VARCHAR"/>
        <result column="receipt_item_spec" property="receiptItemSpec" jdbcType="VARCHAR"/>
        <result column="receipt_item_unit" property="receiptItemUnit" jdbcType="VARCHAR"/>
        <result column="receipt_item_num" property="receiptItemNum" jdbcType="INTEGER"/>
        <result column="unit_fee" property="unitFee" jdbcType="INTEGER"/>
        <result column="fee" property="fee" jdbcType="INTEGER"/>
        <result column="major_catalogues" property="majorCatalogues" jdbcType="INTEGER"/>
        <result column="receipt_item_code" property="receiptItemCode" jdbcType="VARCHAR"/>
        <result column="is_imp" property="isImp" jdbcType="INTEGER"/>
        <result column="status" property="status" jdbcType="INTEGER"/>
        <result column="bill_dept" property="billDept" jdbcType="VARCHAR"/>
        <result column="exe_dept" property="exeDept" jdbcType="VARCHAR"/>
        <result column="detail_id" property="detailId" jdbcType="VARCHAR"/>
    </resultMap>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 04 10:11:19 CST 2018.
        -->
        delete from receipt_item
        where id = #{id,jdbcType=VARCHAR}
    </delete>
    <insert id="insert" parameterType="cc.mrbird.febs.hkgf.entity.ReceiptItem">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 04 10:11:19 CST 2018.
        -->
        <selectKey resultType="java.lang.String" keyProperty="id" order="BEFORE">
            SELECT LAST_INSERT_ID()
        </selectKey>
        insert into receipt_item (id, receipt_no, charge_date,
        receipt_item_type, receipt_item_name, receipt_item_spec,
        receipt_item_unit, receipt_item_num, unit_fee,
        fee, detail_no, major_catalogues,
        receipt_item_code)
        values (#{id,jdbcType=VARCHAR}, #{receiptNo,jdbcType=VARCHAR}, #{chargeDate,jdbcType=TIMESTAMP},
        #{receiptItemType,jdbcType=VARCHAR}, #{receiptItemName,jdbcType=VARCHAR}, #{receiptItemSpec,jdbcType=VARCHAR},
        #{receiptItemUnit,jdbcType=VARCHAR}, #{receiptItemNum,jdbcType=INTEGER}, #{unitFee,jdbcType=INTEGER},
        #{fee,jdbcType=INTEGER}, #{detailNo,jdbcType=VARCHAR}, #{majorCatalogues,jdbcType=INTEGER},
        #{receiptItemCode,jdbcType=VARCHAR})
    </insert>
    <update id="updateByPrimaryKey" parameterType="cc.mrbird.febs.hkgf.entity.ReceiptItem">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 04 10:11:19 CST 2018.
        -->
        update receipt_item
        set receipt_no = #{receiptNo,jdbcType=VARCHAR},
        charge_date = #{chargeDate,jdbcType=TIMESTAMP},
        receipt_item_type = #{receiptItemType,jdbcType=VARCHAR},
        receipt_item_name = #{receiptItemName,jdbcType=VARCHAR},
        receipt_item_spec = #{receiptItemSpec,jdbcType=VARCHAR},
        receipt_item_unit = #{receiptItemUnit,jdbcType=VARCHAR},
        receipt_item_num = #{receiptItemNum,jdbcType=INTEGER},
        unit_fee = #{unitFee,jdbcType=INTEGER},
        fee = #{fee,jdbcType=INTEGER},
        detail_no = #{detailNo,jdbcType=VARCHAR},
        major_catalogues = #{majorCatalogues,jdbcType=INTEGER},
        receipt_item_code = #{receiptItemCode,jdbcType=VARCHAR}
        where id = #{id,jdbcType=VARCHAR}
    </update>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 04 10:11:19 CST 2018.
        -->
        select id, receipt_no, charge_date, receipt_item_type, receipt_item_name, receipt_item_spec,
        receipt_item_unit, receipt_item_num, unit_fee, fee, detail_no, major_catalogues,
        receipt_item_code
        from receipt_item
        where id = #{id,jdbcType=VARCHAR}
    </select>
    <select id="selectAll" resultMap="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 04 10:11:19 CST 2018.
        -->
        select id, receipt_no, charge_date, receipt_item_type, receipt_item_name, receipt_item_spec,
        receipt_item_unit, receipt_item_num, unit_fee, fee, detail_no, major_catalogues,
        receipt_item_code
        from receipt_item
    </select>
    <!-- IGNORE -->
    <insert id="insertByList" useGeneratedKeys="true" parameterType="java.util.List">
        INSERT  INTO receipt_item (
        id,
        receipt_no,
        charge_date,
        receipt_item_type,
        receipt_item_name,
        receipt_item_spec,
        receipt_item_unit,
        receipt_item_num,
        unit_fee,
        fee,
        detail_no,
        major_catalogues,
        receipt_item_code,
        is_imp,
        `status`,
        bill_dept,
        exe_dept,
        detail_id
        )
        values
        <foreach collection="list" item="item" index="index" separator=",">
            ( REPLACE(UUID(),'-',''),
            #{item.receiptNo,jdbcType=VARCHAR},
            #{item.chargeDate,jdbcType=TIMESTAMP},
            #{item.receiptItemType,jdbcType=VARCHAR},
            #{item.receiptItemName,jdbcType=VARCHAR},
            #{item.receiptItemSpec,jdbcType=VARCHAR},
            #{item.receiptItemUnit,jdbcType=VARCHAR},
            #{item.receiptItemNum,jdbcType=INTEGER},
            #{item.unitFee,jdbcType=INTEGER},
            #{item.fee,jdbcType=INTEGER},
            #{item.detailNo,jdbcType=VARCHAR},
            #{item.majorCatalogues,jdbcType=INTEGER},
            #{item.receiptItemCode,jdbcType=VARCHAR},
            #{item.isImp},
            #{item.status},
            #{item.billDept},
            #{item.exeDept},
            #{item.detailId})
        </foreach>

    </insert>
    <select id="queryMXBHBySJDH" parameterType="java.lang.String" resultType="java.lang.String">
        SELECT receipt_item_code as MXBH FROM receipt_item WHERE receipt_no=#{sjdh}
    </select>
    <select id="queryMXBHByZZDH" parameterType="java.lang.String" resultType="java.lang.String">
        SELECT receipt_item_code as MXBH FROM receipt_item WHERE receipt_no in (
        select receipt_no from receipt_rolls where zzd_no=#{zzdh})
    </select>
    <select id="queryItemCount" resultType="java.lang.Integer">
        select count(1) from receipt_item where status = 0
    </select>
    <delete id="deleteByFphm" parameterType="java.lang.String">
        delete from receipt_item
        where receipt_no = #{fphm,jdbcType=VARCHAR}
    </delete>
</mapper>